{"ast":null,"code":"import _objectSpread from\"/Users/isaacson/Projects/invester/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{memo,useEffect,useState}from\"react\";import DeleteWidget from\"../DeleteWidget\";import{ChevronRight}from\"react-feather\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BookmarksWidget=/*#__PURE__*/memo(function(_ref){let{id,bookmarks}=_ref;const[createMode,setCreateMode]=useState(false);const[editMode,setEditMode]=useState(false);const[widgetBookmarks,setWidgetBookmarks]=useState([]);function handleCreateBookmark(){setCreateMode(true);}useEffect(()=>{setWidgetBookmarks(bookmarks);},[bookmarks]);return/*#__PURE__*/_jsxs(\"div\",{className:\"widget BookmarksWidget\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"widgetTitle\",children:\"Bookmarks\"}),/*#__PURE__*/_jsx(DeleteWidget,{id:id})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[createMode&&/*#__PURE__*/_jsx(CreateModeForm,{setCreateMode:setCreateMode,id:id,setWidgetBookmarks:setWidgetBookmarks}),widgetBookmarks.length===0?/*#__PURE__*/_jsx(\"h3\",{children:\"No Bookmarks yet!\"}):/*#__PURE__*/_jsx(\"ul\",{children:widgetBookmarks.map((bm,index)=>/*#__PURE__*/_jsx(\"li\",{children:!editMode?/*#__PURE__*/_jsxs(\"a\",{href:bm.link,target:\"_blank\",children:[/*#__PURE__*/_jsx(\"span\",{children:bm.title}),/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsx(ChevronRight,{size:14})})]}):/*#__PURE__*/_jsxs(\"a\",{href:\"#\",onClick:e=>{e.preventDefault();if(window.confirm(\"Are you sure?\")){// TODO: refactor here..\nconst newList=widgetBookmarks.filter(wbm=>wbm.title!==bm.title);setWidgetBookmarks(newList);const widgets=JSON.parse(window.localStorage.getItem(\"widgets\"));const widgetsEdited=widgets.map(w=>{if(w.i===id){w.bookmarks=newList;}return w;});localStorage.setItem(\"widgets\",JSON.stringify(widgetsEdited));setEditMode(false);}},children:[bm.title,\" - Delete\"]})},index))}),!createMode&&!editMode&&/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"button\",{style:{marginRight:10,opacity:0.6},onClick:e=>{setEditMode(true);},children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleCreateBookmark,children:\"Create Bookmark\"})]})]})]});});const CreateModeForm=_ref2=>{let{setCreateMode,id,setWidgetBookmarks}=_ref2;const[formData,setFormData]=useState({title:\"\",link:\"\"});function handleSaveBookmark(e){e.preventDefault();if(formData.title&&formData.link){const widgets=JSON.parse(window.localStorage.getItem(\"widgets\"));const widgetsEdited=widgets.map(w=>{if(w.i===id){if(w.bookmarks){w.bookmarks.push(formData);}else{w.bookmarks=[formData];}}return w;});localStorage.setItem(\"widgets\",JSON.stringify(widgetsEdited));setWidgetBookmarks(bookmarks=>[...bookmarks,...[formData]]);setCreateMode(false);}}return/*#__PURE__*/_jsx(\"div\",{className:\"createBookmarkForm\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSaveBookmark,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"title\",children:\"Title : \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{title:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"link\",children:\"Link : \"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{onChange:e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{link:e.target.value}));}}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\"},children:[/*#__PURE__*/_jsx(\"button\",{style:{marginRight:10,opacity:0.6},onClick:e=>{e.preventDefault();setCreateMode(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save Bookmark\"})]})]})});};export default BookmarksWidget;","map":{"version":3,"names":["React","memo","useEffect","useState","DeleteWidget","ChevronRight","jsx","_jsx","jsxs","_jsxs","BookmarksWidget","_ref","id","bookmarks","createMode","setCreateMode","editMode","setEditMode","widgetBookmarks","setWidgetBookmarks","handleCreateBookmark","className","children","CreateModeForm","length","map","bm","index","href","link","target","title","size","onClick","e","preventDefault","window","confirm","newList","filter","wbm","widgets","JSON","parse","localStorage","getItem","widgetsEdited","w","i","setItem","stringify","style","display","marginRight","opacity","_ref2","formData","setFormData","handleSaveBookmark","push","onSubmit","htmlFor","onChange","_objectSpread","value","type"],"sources":["/Users/isaacson/Projects/invester/src/components/Board/Widgets/Bookmarks/BookmarksWidget.tsx"],"sourcesContent":["import React, {\n    Dispatch,\n    SetStateAction,\n    memo,\n    useEffect,\n    useState,\n} from \"react\";\nimport DeleteWidget from \"../DeleteWidget\";\nimport { ChevronRight } from \"react-feather\";\nimport { Widget } from \"../../Board\";\n\nconst BookmarksWidget = memo(function ({\n    id,\n    bookmarks,\n}: {\n    id: string;\n    bookmarks: Bookmark[];\n}) {\n    const [createMode, setCreateMode] = useState<boolean>(false);\n    const [editMode, setEditMode] = useState<boolean>(false);\n    const [widgetBookmarks, setWidgetBookmarks] = useState<Bookmark[]>([]);\n\n    function handleCreateBookmark() {\n        setCreateMode(true);\n    }\n\n    useEffect(() => {\n        setWidgetBookmarks(bookmarks);\n    }, [bookmarks]);\n\n    return (\n        <div className=\"widget BookmarksWidget\">\n            <div className=\"header\">\n                <div className=\"widgetTitle\">Bookmarks</div>\n                <DeleteWidget id={id} />\n            </div>\n            <div className=\"content\">\n                {createMode && (\n                    <CreateModeForm\n                        setCreateMode={setCreateMode}\n                        id={id}\n                        setWidgetBookmarks={setWidgetBookmarks}\n                    />\n                )}\n                {widgetBookmarks.length === 0 ? (\n                    <h3>No Bookmarks yet!</h3>\n                ) : (\n                    <ul>\n                        {widgetBookmarks.map((bm: Bookmark, index: number) => (\n                            <li key={index}>\n                                {!editMode ? (\n                                    <a href={bm.link} target=\"_blank\">\n                                        <span>{bm.title}</span>\n                                        <span>\n                                            <ChevronRight size={14} />\n                                        </span>\n                                    </a>\n                                ) : (\n                                    <a\n                                        href=\"#\"\n                                        onClick={(e) => {\n                                            e.preventDefault();\n                                            if (\n                                                window.confirm(\"Are you sure?\")\n                                            ) {\n                                                // TODO: refactor here..\n                                                const newList: Bookmark[] =\n                                                    widgetBookmarks.filter(\n                                                        (wbm) =>\n                                                            wbm.title !==\n                                                            bm.title\n                                                    );\n                                                setWidgetBookmarks(newList);\n\n                                                const widgets = JSON.parse(\n                                                    window.localStorage.getItem(\n                                                        \"widgets\"\n                                                    ) as string\n                                                );\n                                                const widgetsEdited =\n                                                    widgets.map((w: Widget) => {\n                                                        if (w.i === id) {\n                                                            w.bookmarks =\n                                                                newList;\n                                                        }\n                                                        return w;\n                                                    });\n                                                localStorage.setItem(\n                                                    \"widgets\",\n                                                    JSON.stringify(\n                                                        widgetsEdited\n                                                    )\n                                                );\n                                                setEditMode(false);\n                                            }\n                                        }}\n                                    >\n                                        {bm.title} - Delete\n                                    </a>\n                                )}\n                            </li>\n                        ))}\n                    </ul>\n                )}\n\n                {!createMode && !editMode && (\n                    <div style={{ display: \"flex\" }}>\n                        <button\n                            style={{ marginRight: 10, opacity: 0.6 }}\n                            onClick={(e) => {\n                                setEditMode(true);\n                            }}\n                        >\n                            Edit\n                        </button>\n                        <button onClick={handleCreateBookmark}>\n                            Create Bookmark\n                        </button>\n                    </div>\n                )}\n            </div>\n        </div>\n    );\n});\n\nconst CreateModeForm = ({\n    setCreateMode,\n    id,\n    setWidgetBookmarks,\n}: {\n    setCreateMode: Dispatch<SetStateAction<boolean>>;\n    setWidgetBookmarks: Dispatch<SetStateAction<Bookmark[]>>;\n    id: string;\n}) => {\n    const [formData, setFormData] = useState<{ title: string; link: string }>({\n        title: \"\",\n        link: \"\",\n    });\n\n    function handleSaveBookmark(e: any) {\n        e.preventDefault();\n        if (formData.title && formData.link) {\n            const widgets = JSON.parse(\n                window.localStorage.getItem(\"widgets\") as string\n            );\n\n            const widgetsEdited = widgets.map((w: Widget) => {\n                if (w.i === id) {\n                    if (w.bookmarks) {\n                        w.bookmarks.push(formData);\n                    } else {\n                        w.bookmarks = [formData];\n                    }\n                }\n                return w;\n            });\n            localStorage.setItem(\"widgets\", JSON.stringify(widgetsEdited));\n            setWidgetBookmarks((bookmarks: Bookmark[]) => [\n                ...bookmarks,\n                ...[formData],\n            ]);\n            setCreateMode(false);\n        }\n    }\n\n    return (\n        <div className=\"createBookmarkForm\">\n            <form onSubmit={handleSaveBookmark}>\n                <label htmlFor=\"title\">Title : </label>\n                <br />\n                <input\n                    onChange={(e) => {\n                        setFormData({ ...formData, title: e.target.value });\n                    }}\n                />\n\n                <br />\n\n                <label htmlFor=\"link\">Link : </label>\n                <br />\n                <input\n                    onChange={(e) => {\n                        setFormData({ ...formData, link: e.target.value });\n                    }}\n                />\n\n                <br />\n                <br />\n                <div style={{ display: \"flex\" }}>\n                    <button\n                        style={{ marginRight: 10, opacity: 0.6 }}\n                        onClick={(e) => {\n                            e.preventDefault();\n                            setCreateMode(false);\n                        }}\n                    >\n                        Cancel\n                    </button>\n                    <button type=\"submit\">Save Bookmark</button>\n                </div>\n            </form>\n        </div>\n    );\n};\n\nexport default BookmarksWidget;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}